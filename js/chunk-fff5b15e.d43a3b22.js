(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fff5b15e"],{"3ab1":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"n-container n-chat"},[t.getError?r("h3",[t._v(t._s(t.getError))]):r("div",[r("div",{staticClass:"n-preview"},[r("h3",[t._v("Здесь только "+t._s(t.personName)+" и вы")]),r("ul",{ref:"list",staticClass:"n-messages"},t._l(t.history,(function(e){return r("li",{key:e.created,class:["n-message",{"n-right":e.right}]},[r("span",{staticClass:"n-message__text"},[t._v(" "+t._s(e.text)+" ")]),r("span",{staticClass:"n-message__user"},[t._v(" "+t._s(e.sender.username)+": "),r("i",[t._v(t._s(e.room))])])])})),0)]),r("div",{staticClass:"n-chat-actions"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"textarea",attrs:{name:"",placeholder:"Сообщение"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),r("button",{attrs:{type:"button",disabled:!t.message},on:{click:t.onSendMessageClick}},[t._v(" Добавить ")])])])])},o=[];r("b0c0"),r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}r("96cf");var i=r("1da1"),a=r("5530"),c=r("2f62"),u={name:"chatRoom",data:function(){return{history:[],personName:"",scrollHeight:null,timers:{scrollDownTimeout:null},message:""}},computed:Object(a["a"])({},Object(c["b"])(["getHistory","getError"])),methods:{onSendMessageClick:function(){var t=this,e={name:"me",sender:{username:"Я"},text:this.message,right:!0,room:this.$route.query.name,created:(new Date).toLocaleTimeString()};this.$store.dispatch("updateHistory",e),this.message="",this.history=this.getHistory,this.timers.scrollDownTimeout=setTimeout((function(){t.$refs.list.scrollTop=t.$refs.list.scrollHeight}),1)}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("fetchHistory",t.$route.query.name);case 2:t.history=t.getHistory,t.history.length&&"object"===s(t.history[0])?t.personName=t.history[0].sender.username:t.personName=t.$route.query.name,t.timers.scrollDownTimeout=setTimeout((function(){t.$refs.list.scrollTop=t.$refs.list.scrollHeight}),1);case 5:case"end":return e.stop()}}),e)})))()},destroyed:function(){clearTimeout(this.timers.scrollDownTimeout),this.timers.scrollDownTimeout=null}},l=u,m=r("2877"),d=Object(m["a"])(l,n,o,!1,null,null,null);e["default"]=d.exports},"3ca3":function(t,e,r){"use strict";var n=r("6547").charAt,o=r("69f3"),s=r("7dd0"),i="String Iterator",a=o.set,c=o.getterFor(i);s(String,"String",(function(t){a(this,{type:i,string:String(t),index:0})}),(function(){var t,e=c(this),r=e.string,o=e.index;return o>=r.length?{value:void 0,done:!0}:(t=n(r,o),e.index+=t.length,{value:t,done:!1})}))},6547:function(t,e,r){var n=r("a691"),o=r("1d80"),s=function(t){return function(e,r){var s,i,a=String(o(e)),c=n(r),u=a.length;return c<0||c>=u?t?"":void 0:(s=a.charCodeAt(c),s<55296||s>56319||c+1===u||(i=a.charCodeAt(c+1))<56320||i>57343?t?a.charAt(c):s:t?a.slice(c,c+2):i-56320+(s-55296<<10)+65536)}};t.exports={codeAt:s(!1),charAt:s(!0)}},d28b:function(t,e,r){var n=r("746f");n("iterator")},ddb0:function(t,e,r){var n=r("da84"),o=r("fdbc"),s=r("e260"),i=r("9112"),a=r("b622"),c=a("iterator"),u=a("toStringTag"),l=s.values;for(var m in o){var d=n[m],f=d&&d.prototype;if(f){if(f[c]!==l)try{i(f,c,l)}catch(g){f[c]=l}if(f[u]||i(f,u,m),o[m])for(var h in s)if(f[h]!==s[h])try{i(f,h,s[h])}catch(g){f[h]=s[h]}}}},e01a:function(t,e,r){"use strict";var n=r("23e7"),o=r("83ab"),s=r("da84"),i=r("5135"),a=r("861d"),c=r("9bf2").f,u=r("e893"),l=s.Symbol;if(o&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var m={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new l(t):void 0===t?l():l(t);return""===t&&(m[e]=!0),e};u(d,l);var f=d.prototype=l.prototype;f.constructor=d;var h=f.toString,g="Symbol(test)"==String(l("test")),p=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=h.call(t);if(i(m,t))return"";var r=g?e.slice(7,-1):e.replace(p,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:d})}}}]);
//# sourceMappingURL=chunk-fff5b15e.d43a3b22.js.map